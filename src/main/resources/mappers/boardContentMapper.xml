<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.care.root.mybatis.recipeBoard.BoardContentMapper">
	<resultMap id="recipe" type="com.care.root.recipeBoard.vo.RecipeVO">
		<id property="recipeNo" column="recipe_no"/>
		<result property="recipeType" column="recipe_type"/>
		<result property="recipeName" column="recipe_name"/>
		<result property="recipeRegDt" column="recipe_reg_dt"/>
		<result property="recipeDisplay" column="recipe_display"/>
		<result property="recipeExplanation" column="recipe_explanation"/>
		<result property="recipeFileName" column="recipe_file_name"/>
		<result property="recipeDel" column="recipe_del"/>
	</resultMap>



	<insert id="insertFisrtStep" parameterType="com.care.root.recipeBoard.vo.RecipeVO">

		insert into
		    RECIPE (
				recipe_type
				, recope_name
				, recipe_reg_dt
				, recipe_display
				, recipe_explanation
				, recipe_file_name
			)
		VALUES
			(
				#{recipeType}
				, #{recipeName}
				, now()
				, 'Y'
				, #{recipeExplanation}
				, #{recipeFileName}
			)

	</insert>


	<insert id="insertSecountStep" parameterType="com.care.root.recipeBoard.vo.RecipeVO">
		<selectKey resultType="int" keyProperty="recipeNo" order="BEFORE">
			SELECT RECIPE_NO FROM RECIPE order by RECIPE_REG_DT desc limit 1
		</selectKey>
		INSERT INTO
			RECIPE_ETC
			(
				  RECIPE_ETC_INGREDIENT
				, RECIPE_ETC_QUANTITY
				, RECIPE_ETC_TYPE
				, RECIPE_ETC_DT
				, RECIPE_NO
			)
		VALUES
		    (
				#{recipeEtcIngredient}
				, #{recipeEtcQuantity}
				, #{recipeEtcType}
				, now()
				, #{recipeNo}
			)


	</insert>
</mapper>